<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>DiveTracker</title>
  <!-- <link rel="manifest" href="manifest.json"> -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="application-name" content="DiveTracker">
  <meta name="apple-mobile-web-app-title" content="DiveTracker">
  <meta name="msapplication-starturl" content="/index.html">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme-color" content="#000000">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <link rel="stylesheet" href="./app.css">
</head>
<body>
<header>
</header>
<main>
  <div id="chart_div"></div>
</main>
<footer>
</footer>
<script type="module">
  import { Dive } from './lib/dc.js';
  import { diveLogger } from './lib/logger.js';

  var diveGraph = [];
  function addData(t, dive) {
    diveGraph.push([t, -dive.curDepth, -dive.avgDepth, dive.decoState.ndt / 10]);
  }

  var dives = [
    {"number":97,"subsurface_number":98,"date":"2023-11-19","time":"12:53:00","location":"Recife, PE, Brasil / Bellatrix", "coordinates":{"lat":"-8.038917","lon":"-34.725700"},"rating":5,"visibility":4,"current":3,"wavesize":2,"surge":0,"chill":4,"dive_duration":"37:40 min","temperature":{"air":"--","water":"26.1 °C"	},"buddy":"Robson Gonçalves", "diveguide":"Confraria do Mergulho, Aquáticos Recife", "suit":"half, 3mm", "tags":["#bcd:cressi_start", "#dc:mares_puck_pro", "#fins:seasub_fluence", "#mask:cressi_pano3", "#reg:cressi_mc5", "#suit:pino_3mm", "boat", "wreck"],"Cylinders":[{"Type":"AL80", "Size":"11.1 ℓ ", "WPressure":"207.0 bar ", "SPressure":"210.0 bar ", "EPressure":"50.0 bar ", "O2":"33.0%","He":"0.0%"}],"Weights":[{"weight":"6.0 kg","description":"belt" }],"maxdepth":30100,"duration":2260,"samples":[[5,1800,0,300950], [10,2300,0,301050], [15,2600,0,0], [20,3500,0,0], [25,3900,0,0], [30,4500,0,0], [35,4800,0,300950], [40,5300,0,0], [45,5800,0,0], [50,6000,0,0], [55,6700,0,0], [60,7200,0,0], [65,7600,0,0], [70,7700,0,0], [75,8600,0,0], [80,9100,0,0], [85,9700,0,300850], [90,10000,0,0], [95,10800,0,0], [100,11400,0,0], [105,11900,0,0], [110,12700,0,0], [115,14000,0,0], [120,15600,0,0], [125,17000,0,300750], [130,18600,0,300450], [135,20300,0,300250], [140,22400,0,300050], [145,24200,0,299950], [150,25900,0,299850], [155,26900,0,299750], [160,27400,0,0], [165,27800,0,299650], [170,28300,0,0], [175,28500,0,299550], [180,28700,0,0], [185,28900,0,0], [190,29300,0,0], [195,29400,0,299450], [200,29500,0,0], [205,29700,0,0], [210,29800,0,0], [215,29800,0,0], [220,30000,0,0], [225,30100,0,0], [230,30000,0,0], [235,29700,0,0], [240,29300,0,0], [245,29200,0,0], [250,28800,0,299350], [255,28900,0,0], [260,29100,0,0], [265,29100,0,0], [270,29100,0,0], [275,28700,0,0], [280,28900,0,0], [285,29300,0,0], [290,29800,0,0], [295,29700,0,0], [300,29800,0,0], [305,29700,0,0], [310,29800,0,0], [315,29900,0,0], [320,29800,0,0], [325,29700,0,0], [330,29700,0,299250], [335,29500,0,299350], [340,29300,0,299250], [345,29500,0,0], [350,29500,0,0], [355,29700,0,0], [360,29700,0,0], [365,29300,0,0], [370,29300,0,0], [375,29300,0,0], [380,29100,0,0], [385,29300,0,0], [390,29500,0,0], [395,29500,0,0], [400,29300,0,0], [405,29100,0,0], [410,28800,0,0], [415,28100,0,0], [420,27900,0,0], [425,26100,0,299350], [430,26200,0,0], [435,26200,0,0], [440,26100,0,299450], [445,25500,0,0], [450,25400,0,0], [455,25200,0,0], [460,25000,0,0], [465,25300,0,0], [470,25900,0,0], [475,26000,0,0], [480,26000,0,299350], [485,26100,0,0], [490,25700,0,0], [495,25700,0,299450], [500,26200,0,0], [505,26900,0,0], [510,27300,0,0], [515,28000,0,0], [520,28400,0,0], [525,28400,0,0], [530,28500,0,0], [535,28400,0,299350], [540,28100,0,0], [545,27700,0,0], [550,27900,0,0], [555,28300,0,0], [560,28400,0,0], [565,28300,0,0], [570,27900,0,0], [575,27700,0,0], [580,27400,0,299250], [585,27400,0,0], [590,27300,0,0], [595,26900,0,0], [600,26400,0,0], [605,26000,0,299350], [610,25700,0,0], [615,25600,0,0], [620,25500,0,0], [625,25800,0,299250], [630,26000,0,0], [635,25900,0,0], [640,25200,0,299350], [645,24700,0,0], [650,24300,0,0], [655,24400,0,0], [660,24300,0,0], [665,24200,0,0], [670,23800,0,0], [675,24000,0,0], [680,25100,0,0], [685,26400,0,0], [690,28000,0,0], [695,28300,0,299250], [700,28900,0,0], [705,29200,0,0], [710,29300,0,0], [715,29000,0,0], [720,28900,0,0], [725,28200,0,0], [730,28000,0,0], [735,27900,0,0], [740,27900,0,0], [745,27800,0,0], [750,28300,0,299350], [755,28600,0,299250], [760,28500,0,0], [765,28100,0,299350], [770,28000,0,0], [775,28200,0,299250], [780,28500,0,0], [785,28300,0,0], [790,28200,0,0], [795,28300,0,0], [800,28200,0,0], [805,28100,0,299350], [810,27800,0,0], [815,27900,0,299250], [820,27700,0,299350], [825,27200,0,0], [830,26600,0,0], [835,26000,0,0], [840,25000,0,0], [845,24200,0,0], [850,23300,0,0], [855,22300,0,299450], [860,21400,0,0], [865,20200,0,299550], [870,19700,0,0], [875,19300,0,299650], [880,18800,0,0], [885,19400,0,299750], [890,19700,0,0], [895,19700,0,0], [900,19700,0,0], [905,20200,0,0], [910,20800,0,0], [915,21600,0,0], [920,22500,0,299650], [925,22600,0,0], [930,23000,0,0], [935,23800,0,299550], [940,24200,0,0], [945,25000,0,0], [950,25300,0,0], [955,25600,0,0], [960,26000,0,0], [965,26100,0,0], [970,26300,0,0], [975,26400,0,0], [980,26500,0,0], [985,26500,0,0], [990,26300,0,0], [995,26300,0,0], [1000,26300,0,0], [1005,26500,0,0], [1010,26300,0,299450], [1015,25900,0,0], [1020,25600,0,0], [1025,25300,0,0], [1030,25200,0,0], [1035,25300,0,0], [1040,25200,0,0], [1045,25300,0,0], [1050,25100,0,0], [1055,25000,0,0], [1060,25200,0,0], [1065,25400,0,0], [1070,25400,0,0], [1075,25300,0,0], [1080,25600,0,0], [1085,25800,0,0], [1090,25900,0,0], [1095,25800,0,0], [1100,26000,0,0], [1105,26200,0,0], [1110,26400,0,0], [1115,26500,0,299350], [1120,26600,0,0], [1125,26100,0,0], [1130,25900,0,0], [1135,25400,0,299450], [1140,25600,0,299350], [1145,25500,0,0], [1150,24900,0,299450], [1155,24800,0,0], [1160,24800,0,0], [1165,24400,0,0], [1170,24400,0,0], [1175,24300,0,0], [1180,23800,0,0], [1185,23600,0,0], [1190,23600,0,299550], [1195,23600,0,0], [1200,23600,0,0], [1205,23500,0,0], [1210,23300,0,0], [1215,23500,0,0], [1220,23800,0,0], [1225,23800,0,0], [1230,23900,0,0], [1235,23900,0,0], [1240,23900,0,0], [1245,24200,0,0], [1250,24600,0,0], [1255,24400,0,0], [1260,24000,0,0], [1265,23500,0,0], [1270,23100,0,0], [1275,22800,0,0], [1280,22300,0,0], [1285,22200,0,299650], [1290,23100,0,0], [1295,23800,0,299550], [1300,23900,0,0], [1305,24100,0,299650], [1310,23800,0,0], [1315,23200,0,0], [1320,22300,0,0], [1325,21900,0,0], [1330,21700,0,0], [1335,21400,0,0], [1340,21100,0,0], [1345,20900,0,299750], [1350,20800,0,0], [1355,20800,0,0], [1360,20900,0,0], [1365,21300,0,0], [1370,21200,0,0], [1375,21300,0,0], [1380,21300,0,0], [1385,20500,0,0], [1390,20400,0,0], [1395,20700,0,0], [1400,20900,0,0], [1405,21200,0,0], [1410,21200,0,0], [1415,21400,0,0], [1420,21400,0,0], [1425,21400,0,0], [1430,21400,0,0], [1435,21200,0,0], [1440,21100,0,0], [1445,21300,0,0], [1450,21100,0,0], [1455,21300,0,0], [1460,21800,0,299650], [1465,21900,0,0], [1470,22000,0,0], [1475,21600,0,0], [1480,21300,0,0], [1485,20700,0,0], [1490,20400,0,0], [1495,19500,0,0], [1500,18500,0,0], [1505,17600,0,299750], [1510,17500,0,299850], [1515,17300,0,299950], [1520,17300,0,300050], [1525,16700,0,300150], [1530,16900,0,300250], [1535,17500,0,0], [1540,17600,0,0], [1545,17900,0,0], [1550,18300,0,0], [1555,18500,0,0], [1560,18900,0,300050], [1565,18900,0,299950], [1570,18700,0,0], [1575,18100,0,299850], [1580,17900,0,299950], [1585,17800,0,0], [1590,17200,0,0], [1595,17100,0,0], [1600,17100,0,300050], [1605,17400,0,300150], [1610,17800,0,300050], [1615,18900,0,299950], [1620,20100,0,299850], [1625,20900,0,0], [1630,22000,0,299750], [1635,22400,0,0], [1640,22100,0,299650], [1645,21800,0,299750], [1650,20900,0,0], [1655,20300,0,0], [1660,20100,0,0], [1665,19100,0,0], [1670,18700,0,299850], [1675,18000,0,299950], [1680,17300,0,300050], [1685,17600,0,300150], [1690,17700,0,0], [1695,18000,0,300250], [1700,19200,0,300350], [1705,20200,0,300250], [1710,20800,0,300050], [1715,20800,0,299950], [1720,20700,0,0], [1725,20200,0,0], [1730,20000,0,300050], [1735,19900,0,299950], [1740,20000,0,299850], [1745,20100,0,0], [1750,20300,0,0], [1755,20600,0,0], [1760,21100,0,0], [1765,21900,0,0], [1770,22400,0,299750], [1775,22900,0,0], [1780,23600,0,299650], [1785,23600,0,0], [1790,23600,0,299550], [1795,23500,0,0], [1800,23200,0,0], [1805,22700,0,0], [1810,22200,0,0], [1815,21600,0,0], [1820,20600,0,0], [1825,20200,0,299650], [1830,19400,0,0], [1835,18900,0,299750], [1840,18000,0,0], [1845,17400,0,299850], [1850,16800,0,299950], [1855,16500,0,300150], [1860,16300,0,300250], [1865,15900,0,300350], [1870,15400,0,0], [1875,15100,0,300450], [1880,14600,0,300550], [1885,13800,0,0], [1890,13400,0,0], [1895,13400,0,0], [1900,13300,0,300650], [1905,13100,0,0], [1910,13200,0,0], [1915,13100,0,0], [1920,13000,0,0], [1925,12900,0,0], [1930,12600,0,0], [1935,11900,0,0], [1940,11300,0,300750], [1945,11300,0,0], [1950,11200,0,0], [1955,10900,0,0], [1960,10800,0,0], [1965,10800,0,0], [1970,10700,0,0], [1975,10300,0,0], [1980,10000,0,0], [1985,8400,0,300850], [1990,7900,0,0], [1995,7500,0,0], [2000,7400,0,300950], [2005,7300,0,0], [2010,7000,0,0], [2015,6300,0,0], [2020,5900,0,0], [2025,4800,0,301050], [2030,4900,0,0], [2035,4600,0,0], [2040,4400,0,0], [2045,4700,0,0], [2050,4800,0,0], [2055,4800,0,0], [2060,4600,0,0], [2065,4700,0,0], [2070,4800,0,0], [2075,4900,0,0], [2080,5100,0,0], [2085,5300,0,0], [2090,5400,0,0], [2095,5400,0,0], [2100,5600,0,0], [2105,5400,0,0], [2110,5600,0,0], [2115,5200,0,0], [2120,5800,0,0], [2125,5700,0,0], [2130,5300,0,0], [2135,5200,0,0], [2140,5100,0,0], [2145,5400,0,0], [2150,5200,0,0], [2155,5500,0,0], [2160,5700,0,0], [2165,5800,0,0], [2170,5700,0,0], [2175,5700,0,0], [2180,5700,0,0], [2185,5500,0,0], [2190,5700,0,0], [2195,5200,0,0], [2200,4600,0,301150], [2205,4900,0,0], [2210,5000,0,0], [2215,4700,0,0], [2220,3900,0,0], [2225,3700,0,0], [2230,3200,0,0], [2235,2900,0,0], [2240,2700,0,0], [2245,1800,0,0], [2250,1400,0,0], [2255,800,0,0], [2260,300,0,0], [2265,400,0,0], [2270,400,0,0], [2275,0,0,0], [2280,200,0,0], [2285,300,0,0], [2290,200,0,0], [2295,300,0,301250], [2300,300,0,0], [2305,100,0,0], [2310,200,0,0], [2315,300,0,0], [2320,100,0,0], [2325,100,0,0], [2330,100,0,0], [2335,100,0,0], [2340,100,0,0], [2345,100,0,0], [2350,100,0,0], [2355,100,0,0], [2360,200,0,301350], [2365,100,0,0], [2370,200,0,0], [2375,200,0,0], [2380,200,0,0], [2385,100,0,0], [2390,200,0,0], [2395,200,0,0], [2400,100,0,0], [2405,0,0,0], [2410,100,0,0], [2415,100,0,0], [2420,100,0,0], [2425,100,0,0], [2430,100,0,0]],"events":[{"name":"gaschange","value":"0","type":"25","time":"5"}],"sac":"14772","otu":"37","cns":"24","divecomputers":[{"model":"Mares Puck Pro", "deviceid":"63a7aed8", "diveid":"0c7047a9" }],"notes":"Esse mergulho foi o melhor! Tubaroes lixa, tartaruga, raias e ate barracuda! E passagens top tambem!"}
  ];

  let dive = new Dive();
  dive.mockTime = 0;
  diveLogger.dive = dive;
  dive.start(.33);
  for (let i = 0; i < dives[0].samples.length; i++) {
    dive.mockTime = dives[0].samples[i][0];
    dive.depth = dives[0].samples[i][1] / 1000;
    addData(dive.durSec, dive);
  }
  console.log(`Deco Group: ${dive.decoState.group == 'N'}`);
  console.log(`Max Depth: ${parseInt(dive.maxDepth) == 30}`);
  console.log(`AVG Depth: ${parseInt(dive.avgDepth) == 18}`);
  dive.end();
  //console.log(diveLogger.export());
  
  google.charts.load('current', {packages: ['corechart', 'line']});
  google.charts.setOnLoadCallback(drawAxisTickColors);

  function drawAxisTickColors() {
      var data = new google.visualization.DataTable();
      data.addColumn('number', 'Time');
      data.addColumn('number', 'Depth');
      data.addColumn('number', 'Avg Depth');
      data.addColumn('number', 'NDT');

      data.addRows(diveGraph);

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, {});
  }

</script>
</body>
</html>